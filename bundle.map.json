{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/index.js","src/page.js","src/histogram.js","src/annotation.js","src/graph.js","src/request.js","src/config.js","src/colors.js"],"names":["Page","require","Histogram","Annotation","cache","window","onstatechange","pathname","oncomplete","document","querySelector","page","isPullRequests","histogram","node","parentNode","insertBefore","assigneeButton","addEventListener","graph","click","isSinglePullRequest","Date","now","lastModified","fetchPullRequests","then","error","console","stack","location","this","Graph","components","substring","split","previousComponent","length","component","pop","pullRequestId","repository","owner","apiURL","protocol","request","config","prototype","headers","Authorization","TOKEN","self","query","state","response","last","Link","match","promises","i","push","labels","Promise","all","responses","reduce","memo","concat","json","map","addPullRequest","module","exports","colors","reset","people","Object","keys","id","filter","person","assigned","sort","a","b","totalAssigned","totalPullRequests","pullRequests","url","container","createContainer","appendChild","createDescription","createHistogramContainer","createElement","className","setStyle","containerStyle","description","textContent","descriptionStyle","histogramStyle","forEach","createPersonBar","createUnassignedBar","href","login","setAttribute","personBarStyle","percentage","image","src","avatarURL","alt","avatarImageStyle","search","unassigned","unassignedBarStyle","el","styles","style","first","shift","toUpperCase","unshift","join","height","border-radius","background-color","border","display","align-content","align-items","flex","padding-right","font-weight","width","margin","Math","round","float","get","min-width","toFixed","menus","querySelectorAll","Array","call","value","iconElement","padding","classList","remove","add","PullRequest","data","number","title","assignee","Person","assigner","user","updatedAt","date","isAssigner","pullRequest","avatar_url","Response","status","body","responseText","convertHeaders","getAllResponseHeaders","indexOf","JSON","parse","options","resolve","reject","XMLHttpRequest","param","index","array","open","method","header","setRequestHeader","onload","onerror","send","result","parts","trim","trimmedHeader","position","HARBOR_MASTER_TOKEN","defineProperties"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Created by kklimuk on 4/4/15.\n */\n'use strict';\nvar Page = require('./page');\nvar Histogram = require('./histogram');\nvar Annotation = require('./annotation');\n\nvar cache = {};\nwindow.onstatechange = function (pathname) {\n    var page = new Page(pathname);\n\n    function oncomplete() {\n        if (!document.querySelector('.pull-request-histogram') &&\n            document.querySelector('.table-list-header') && page.isPullRequests) {\n            var histogram = new Histogram(page);\n            var node = document.querySelector('.table-list-header');\n\n            node.parentNode.insertBefore(histogram, node);\n        } else {\n            var assigneeButton = document.querySelector('.sidebar-assignee button.discussion-sidebar-toggle');\n            assigneeButton.addEventListener('click', function () {\n                new Annotation(page.graph);\n            });\n\n            assigneeButton.click();\n            assigneeButton.click();\n        }\n    }\n\n    if (page.isPullRequests || page.isSinglePullRequest) {\n        if (Date.now() - (cache.lastModified || 0) > 60000) {\n            page.fetchPullRequests().then(function () {\n                cache.lastModified = Date.now();\n                cache.graph = page.graph;\n                oncomplete();\n            }, function (error) {\n                console.error(error.stack);\n            });\n        } else {\n            page.graph = cache.graph;\n            oncomplete();\n        }\n    }\n};\n\nwindow.onstatechange(window.location.pathname);","/**\n * Created by kklimuk on 4/5/15.\n */\n'use strict';\nvar request = require('./request');\nvar config = require('./config');\nvar Graph = require('./graph');\n\nfunction Page(pathname) {\n    this.graph = new Graph();\n    var components = pathname.substring(1).split('/');\n    var previousComponent = null;\n    while (components.length) {\n        var component = components.pop();\n\n        this.isPullRequests = component === 'pulls';\n        this.isSinglePullRequest = component === 'pull';\n        if (this.isPullRequests || this.isSinglePullRequest) {\n            if (this.isSinglePullRequest) {\n                this.pullRequestId = previousComponent;\n            }\n\n            this.repository = components.pop();\n            this.owner = components.pop();\n            this.apiURL = window.location.protocol + '//api.github.com/repos/' + this.owner + '/' + this.repository;\n\n            break;\n        }\n\n        previousComponent = component;\n    }\n}\n\nPage.prototype.fetchPullRequests = function () {\n    var headers = {\n        'Authorization': 'token ' + config.TOKEN\n    };\n    var self = this;\n\n    return request(self.apiURL + '/issues', {\n        query: {\n            state: 'open'\n        },\n        headers: headers\n    }).then(function (response) {\n        var last = (response.headers.Link || '').match(/page=(\\d+)>; rel=\"last\"$/);\n        last = last && last.length > 1 ? last[1] : 0;\n\n        if (last) {\n            var promises = [response];\n            for (var i = 1; i < last; i++) {\n                promises.push(request(self.apiURL + '/pulls', {\n                    query: {\n                        state: 'open',\n                        page: i + 1,\n                        labels: 'Review Requested'\n                    },\n                    headers: headers\n                }))\n            }\n            return Promise.all(promises);\n        }\n        return [response];\n    }).then(function (responses) {\n        return responses.reduce(function (memo, response) {\n            return memo.concat(response.json);\n        }, []).map(self.graph.addPullRequest, self.graph);\n    });\n};\n\nmodule.exports = Page;","/**\n * Created by kklimuk on 4/5/15.\n */\n'use strict';\nvar colors = require('./colors');\n\nfunction Histogram(page) {\n    colors.reset();\n    this.people = Object.keys(page.graph.people).map(function (id) {\n        return page.graph.people[id];\n    }).filter(function (person) {\n        return person.assigned.length > 0;\n    }).sort(function (a, b) {\n        return a.assigned.length < b.assigned.length ? 1 : -1;\n    });\n    this.totalAssigned = this.people.reduce(function (memo, person) {\n        return memo + person.assigned.length;\n    }, 0);\n    this.totalPullRequests = Object.keys(page.graph.pullRequests).length;\n    this.url = '/' + page.owner + '/' + page.repository + '/pulls';\n\n    this.container = this.createContainer();\n    this.container.appendChild(this.createDescription());\n    this.container.appendChild(this.createHistogramContainer());\n\n    return this.container;\n}\n\nHistogram.prototype.createContainer = function () {\n    var container = document.createElement('div');\n    container.className = 'issues-reset-query-wrapper';\n    this.setStyle(container, this.containerStyle);\n    return container;\n};\n\nHistogram.prototype.createDescription = function () {\n    var description = document.createElement('span');\n    description.textContent = 'Assignees:';\n    this.setStyle(description, this.descriptionStyle);\n    return description;\n};\n\nHistogram.prototype.createHistogramContainer = function () {\n    var container = document.createElement('div');\n\n    this.setStyle(container, this.histogramStyle);\n    container.className = 'pull-request-histogram';\n    this.people.forEach(function (person) {\n        container.appendChild(this.createPersonBar(person));\n    }, this);\n    if (this.totalPullRequests - this.totalAssigned > 0) {\n        container.appendChild(this.createUnassignedBar());\n    }\n\n    return container;\n};\n\nHistogram.prototype.createPersonBar = function (person) {\n    var container = document.createElement('a');\n    container.href = this.url + '/assigned/' + person.login;\n    container.className = 'pull-request-person tooltipped tooltipped-n';\n    container.setAttribute('aria-label',\n        person.login + ': ' + person.assigned.length + ' pull request' + (person.assigned.length > 1 ? 's' : ''));\n    this.setStyle(container, this.personBarStyle(person));\n\n    var percentage = person.assigned.length / this.totalPullRequests * 100;\n    if (percentage > 3) {\n        var image = document.createElement('img');\n        image.src = person.avatarURL;\n        image.alt = person.login;\n        container.appendChild(image);\n        this.setStyle(image, this.avatarImageStyle);\n    }\n\n    return container;\n};\n\nHistogram.prototype.createUnassignedBar = function () {\n    var container = document.createElement('a');\n    container.href = this.url + (window.location.search ? window.location.search :  '?q=is%3Aopen+is%3Apr') + '+no%3Aassignee';\n    container.className = 'pull-request-unassigned tooltipped tooltipped-n';\n    var unassigned = (this.totalPullRequests - this.totalAssigned);\n    container.setAttribute('aria-label',\n        unassigned + ' unassigned pull request' + (unassigned > 1 ? 's' : ''))\n    this.setStyle(container, this.unassignedBarStyle());\n\n    return container;\n};\n\nHistogram.prototype.setStyle = function (el, styles) {\n    Object.keys(styles).forEach(function (style) {\n        var components = style.split('-');\n        var first = components.shift();\n\n        components = components.map(function (component) {\n            return component.substring(0, 1).toUpperCase() + component.substring(1);\n        });\n        components.unshift(first);\n\n        el.style[components.join('')] = styles[style];\n    });\n};\n\nvar height = 40;\nHistogram.prototype.histogramStyle = {\n    'border-radius': '3px',\n    'height': height + 'px',\n    'background-color': '#F8F8F8',\n    'border': '1px solid #E5E5E5',\n    display: 'flex',\n    'align-content': 'stretch',\n    'align-items': 'stretch',\n    flex: '1'\n};\n\nHistogram.prototype.descriptionStyle = {\n    'padding-right': '10px',\n    'font-weight': 'bold'\n};\n\nHistogram.prototype.containerStyle = {\n    'display': 'flex',\n    'align-items': 'center'\n};\n\nHistogram.prototype.avatarImageStyle = {\n    width: '30px',\n    height: '30px',\n    margin: '4px',\n    display: 'block',\n    border: '1px solid #E5E5E5'\n};\n\nHistogram.prototype.personBarStyle = function (person) {\n    return {\n        flex: Math.round(person.assigned.length / this.totalPullRequests * 100),\n        float: 'left',\n        'background-color': colors.get(),\n        display: 'block'\n    };\n};\n\nHistogram.prototype.unassignedBarStyle = function () {\n    return {\n        'min-width': ((this.totalPullRequests - this.totalAssigned) / this.totalPullRequests * 100).toFixed(2) + '%',\n        display: 'block'\n    };\n};\n\n\nmodule.exports = Histogram;","/**\n * Created by kklimuk on 4/5/15.\n */\n'use strict';\n\nfunction Annotation(graph) {\n    var menus = document.querySelectorAll('[data-filterable-for=assignee-filter-field] .select-menu-item');\n    Array.prototype.forEach.call(menus, function(el) {\n        var login = el.querySelector('[name=\"issue[assignee]\"]').value;\n\n        var iconElement = el.querySelector('.select-menu-item-icon');\n        iconElement.style.width = '32px';\n        iconElement.style.padding = '8px 0 8px 6px';\n\n        if (graph.people[login] && graph.people[login].assigned.length) {\n            iconElement.classList.remove('octicon-check');\n            iconElement.classList.add('octicon-git-pull-request');\n            iconElement.classList.add('open');\n            iconElement.textContent = ' ' + graph.people[login].assigned.length;\n        }\n    });\n}\n\nmodule.exports = Annotation;","/**\n * Created by kklimuk on 4/5/15.\n */\n'use strict';\n\nfunction Graph() {\n    this.people = {};\n    this.pullRequests = {};\n}\n\nGraph.prototype.addPullRequest = function (data) {\n    return new PullRequest(data, this);\n};\n\nfunction PullRequest(data, graph) {\n    if (data.number in graph.pullRequests) {\n        return graph.pullRequests[data.number];\n    }\n\n    this.title = data.title;\n    this.number = data.number;\n    this.assignee = data.assignee ? new Person(data.assignee, false, this, graph) : null;\n    this.assigner = data.user ? new Person(data.user, true, this, graph) : null;\n    this.updatedAt = new Date(data.date);\n    graph.pullRequests[data.number] = this;\n}\n\nfunction Person(data, isAssigner, pullRequest, graph) {\n    if (data.login in graph.people) {\n        var person = graph.people[data.login];\n        if (isAssigner) {\n            person.assigner.push(pullRequest);\n        } else {\n            person.assigned.push(pullRequest);\n        }\n        return person;\n    }\n\n    this.id = data.id;\n    this.login = data.login;\n    this.avatarURL = data.avatar_url;\n    this.assigned = isAssigner ? [] : [ pullRequest ];\n    this.assigner = isAssigner ? [ pullRequest ] : [];\n    graph.people[this.login] = this;\n}\n\nmodule.exports = Graph;","/**\n * Created by kklimuk on 4/4/15.\n */\n'use strict';\n\nfunction Response(request) {\n    this.status = request.status;\n    this.body = request.responseText;\n    this.headers = this.convertHeaders(request.getAllResponseHeaders());\n\n    if (this.headers['Content-Type'].indexOf('application/json') !== -1) {\n        this.json = JSON.parse(this.body);\n    }\n}\n\nResponse.prototype.convertHeaders = function (headers) {\n    var result = {};\n\n    var parts = headers.trim().split('\\n').map(function (header) {\n        var trimmedHeader = header.trim();\n        var position = trimmedHeader.indexOf(':');\n\n        return [\n            trimmedHeader.substring(0, position).trim(),\n            trimmedHeader.substring(position + 1).trim()\n        ];\n    });\n    for (var i = 0, length = parts.length; i < length; i++) {\n        result[parts[i][0]] = parts[i][1];\n    }\n\n    return result;\n};\n\nfunction request(url, options) {\n    if (!options) {\n        options = {};\n    }\n\n    return new Promise(function requestResolver(resolve, reject) {\n        var request = new XMLHttpRequest();\n\n        if (options.query) {\n            url += '?';\n            Object.keys(options.query).forEach(function (param, index, array) {\n                url += param + '=' + options.query[param];\n                if (index < array.length - 1) {\n                    url += '&';\n                }\n            });\n        }\n\n        request.open((options.method || 'get').toUpperCase(), url, true);\n\n        if (options.headers) {\n            Object.keys(options.headers).forEach(function (header) {\n                request.setRequestHeader(header, options.headers[header]);\n            });\n        }\n\n        request.onload = function () {\n            resolve(new Response(request));\n        };\n\n        request.onerror = reject;\n\n        request.send();\n    });\n\n}\n\nmodule.exports = request;","/**\n * Created by kklimuk on 4/5/15.\n */\n\nmodule.exports = {\n    TOKEN: window.HARBOR_MASTER_TOKEN\n};","var colors = [\"#abcdef\", \"#31859c\", \"#5a6986\", \"#4886FC\", \"#0579aa\", \"#db5855\", \"#eedd66\", \"#358a5b\", \"#00cafe\", \"#98BAD6\", \"#1957b0\", \"#89e051\", \"#3994bc\", \"#3a4040\", \"#946d57\", \"#7070ff\", \"#46390b\", \"#0095d9\", \"#ae17ff\", \"#6e4a7e\", \"#1E90FF\", \"#467C91\", \"#fcd46d\", \"#f7ede0\", \"#dc566d\", \"#438eff\", \"#ed2cd6\", \"#fcaf3e\", \"#c7a938\", \"#ff0c5a\", \"#82937f\", \"#701516\", \"#b0ce4e\", \"#ca2afe\", \"#343761\", \"#8a0707\", \"#375eab\", \"#945db7\", \"#4F5D95\", \"#aaaaff\", \"#FFCB1F\", \"#e4cc98\", \"#b07219\", \"#7dd3b0\", \"#ed2cd6\", \"#0298c3\", \"#60B5CC\", \"#fa1fa1\", \"#848bf3\", \"#636746\", \"#f7941e\", \"#91de79\", \"#341708\", \"#ee0000\", \"#7891b1\", \"#0098db\", \"#3d9970\", \"#244776\", \"#e44b23\", \"#a54c4d\", \"#ffac45\", \"#555\", \"#6594b9\", \"#fdcd00\", \"#d4bec1\", \"#36699B\", \"#db5855\", \"#dea584\", \"#74283c\", \"#f69e1d\", \"#9DC3FF\", \"#0e60e3\", \"#e4cc98\", \"#cd6400\", \"#fcd7de\", \"#2584c3\", \"#8a1267\", \"#543978\", \"#bd79d1\", \"#2b446d\", \"#e3592c\", \"#1ac620\", \"#02f88c\", \"#c9df40\", \"#004200\", \"#77d9fb\", \"#5a63a3\", \"#6a40fd\", \"#6E4C13\", \"#f0a9f0\", \"#45f715\", \"#ee7d06\", \"#2779ab\", \"#33CCFF\", \"#ff2b2b\", \"#178600\", \"#563d7c\", \"#499886\", \"#44a51c\", \"#066ab2\", \"#cc9900\", \"#b0b77e\", \"#f97732\", \"#f64e3e\", \"#3D6117\", \"#0d3c6e\", \"#f5c800\", \"#755223\", \"#f6a51f\", \"#0298c3\", \"#7b9db4\", \"#3be133\", \"#7582D1\", \"#b0ce4e\", \"#b845fc\", \"#cc5555\", \"#e3491a\", \"#ff9c2e\", \"#dbded5\", \"#118f9e\", \"#596706\", \"#075ff1\", \"#078193\", \"#d80074\", \"#c065db\", \"#f1e05a\", \"#199c4b\", \"#bb92ac\", \"#007eff\", \"#198ce7\", \"#0faf8d\", \"#cc0000\", \"#652B81\", \"#3994bc\", \"#1e4aec\", \"#dbb284\", \"#3581ba\", \"#ce279c\", \"#3fb68b\", \"#A8FF97\", \"#2700e2\", \"#cabbff\", \"#37775b\", \"#0d8921\", \"#8dc63f\", \"#e69f56\", \"#3ebc27\", \"#ccce35\", \"#f3ca0a\", \"#ff0000\", \"#8ad353\", \"#0298c3\", \"#6600cc\", \"#4d41b1\", \"#3a81ad\", \"#cc5c24\", \"#B9D9FF\", \"#ff8877\", \"#bcdc53\", \"#a270ba\", \"#29b544\", \"#a9188d\", \"#cc0088\", \"#f34b7d\", \"#120F14\", \"#cca760\", \"#ffce3b\"];\nvar position = 0;\nObject.defineProperties(colors, {\n    'get': {\n        value: function () {\n            return colors[position++];\n        }\n    },\n    'reset': {\n        value: function () {\n            position = 0;\n            return colors;\n        }\n    }\n});\n\nmodule.exports = colors;"]}